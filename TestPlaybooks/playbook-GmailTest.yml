id: GmailTest
version: 4
name: GmailTest
starttaskid: "0"
tasks:
  "0":
    id: "0"
    taskid: 07b052c6-fcf2-4ce7-8a1b-3063d5cd4881
    type: start
    task:
      id: 07b052c6-fcf2-4ce7-8a1b-3063d5cd4881
      version: -1
      name: ""
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "1"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 50
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "1":
    id: "1"
    taskid: 781264e3-9da4-4ccd-8dc6-e38cd73d4ffb
    type: regular
    task:
      id: 781264e3-9da4-4ccd-8dc6-e38cd73d4ffb
      version: -1
      name: Start clean
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "8"
      - "7"
    scriptarguments:
      all:
        simple: "yes"
      key: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 195
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "2":
    id: "2"
    taskid: 5435aa68-260b-4ba4-82c1-60fe31a537a6
    type: regular
    task:
      id: 5435aa68-260b-4ba4-82c1-60fe31a537a6
      version: -1
      name: List all users
      script: '|||gmail-list-users'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "3"
    scriptarguments:
      custom-field-mask: {}
      customer: {}
      domain: {}
      event: {}
      max-results: {}
      projection: {}
      query: {}
      show-deleted: {}
      sort-order: {}
      token: {}
      view-type-public-domain: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 515
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "3":
    id: "3"
    taskid: a252567c-a4bf-4184-8b1a-fd748ded7a15
    type: regular
    task:
      id: a252567c-a4bf-4184-8b1a-fd748ded7a15
      version: -1
      name: Get specific user
      script: '|||gmail-get-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "5"
    scriptarguments:
      custom-field-mask: {}
      projection: {}
      user-id:
        complex:
          root: Account
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Account.UserName
                iscontext: true
              right:
                value:
                  simple: test
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: Email
          - operator: getField
            args:
              field:
                value:
                  simple: Address
      view-type-public-domain: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 690
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "5":
    id: "5"
    taskid: 9ccf7cc7-ebca-4f35-881e-7064de7fb275
    type: regular
    task:
      id: 9ccf7cc7-ebca-4f35-881e-7064de7fb275
      version: -1
      name: Create new user
      script: '|||gmail-create-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "21"
    scriptarguments:
      email:
        simple: JohnS@demistodev.com
      family-name:
        simple: Smith
      first-name:
        simple: John
      password:
        simple: johnpass1!
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 865
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "6":
    id: "6"
    taskid: 2bc738c4-cf45-402b-8292-8095fe1eef35
    type: regular
    task:
      id: 2bc738c4-cf45-402b-8292-8095fe1eef35
      version: -1
      name: Delete User
      script: '|||gmail-delete-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "13"
      - "26"
    scriptarguments:
      user-id:
        complex:
          root: Account
          filters:
          - - operator: startWith
              left:
                value:
                  simple: Account.Email.Address
                iscontext: true
              right:
                value:
                  simple: JohnS
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: Email
          - operator: getField
            args:
              field:
                value:
                  simple: Address
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 1390
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "7":
    id: "7"
    taskid: cf560fb3-60ac-4d65-81d6-90416525d6c8
    type: title
    task:
      id: cf560fb3-60ac-4d65-81d6-90416525d6c8
      version: -1
      name: Gmail Commands
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "9"
      - "16"
      - "18"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 705,
          "y": 1755
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "8":
    id: "8"
    taskid: a007403f-12de-45e2-8a53-d5d1459aa490
    type: title
    task:
      id: a007403f-12de-45e2-8a53-d5d1459aa490
      version: -1
      name: User Commands
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "2"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 370
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "9":
    id: "9"
    taskid: 9fe9ab4e-0dbe-4f02-8fb5-474f27fb89fe
    type: regular
    task:
      id: 9fe9ab4e-0dbe-4f02-8fb5-474f27fb89fe
      version: -1
      name: Search emails with attachments
      script: '|||gmail-search'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "10"
      - "14"
    scriptarguments:
      after: {}
      before: {}
      fields: {}
      filename: {}
      from: {}
      has-attachments:
        simple: "True"
      in: {}
      include-spam-trash: {}
      label: {}
      labels-ids: {}
      max-results:
        simple: "10"
      page-token: {}
      query: {}
      subject: {}
      to: {}
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 60,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "10":
    id: "10"
    taskid: 9b932409-0876-4ba2-89b8-80962c591630
    type: regular
    task:
      id: 9b932409-0876-4ba2-89b8-80962c591630
      version: -1
      name: Get mail with attachment
      script: '|||gmail-get-attachments'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "29"
    scriptarguments:
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isNotEmpty
              left:
                value:
                  simple: Gmail.Attachments
                iscontext: true
          transformers:
          - operator: GetFirstObject
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 50,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "13":
    id: "13"
    taskid: 0aefee15-76ff-45f5-8737-12ae906e9c52
    type: regular
    task:
      id: 0aefee15-76ff-45f5-8737-12ae906e9c52
      version: -1
      name: Get Tokens
      script: '|||gmail-get-tokens-for-user'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "22"
    scriptarguments:
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1340,
          "y": 1565
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "14":
    id: "14"
    taskid: 8eee57ce-157c-421e-882f-9ff168ba9a5a
    type: regular
    task:
      id: 8eee57ce-157c-421e-882f-9ff168ba9a5a
      version: -1
      name: Get Email data
      script: '|||gmail-get-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "29"
    scriptarguments:
      format: {}
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: admin@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
          - operator: GetFirstObject
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 480,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "16":
    id: "16"
    taskid: d89756d3-8737-43c7-84db-95e656dcd294
    type: regular
    task:
      id: d89756d3-8737-43c7-84db-95e656dcd294
      version: -1
      name: Search all mailboxes
      script: '|||gmail-search-all-mailboxes'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "17"
    scriptarguments:
      after:
        simple: 2018/1/20
      before:
        simple: 2018/1/30
      fields: {}
      filename: {}
      from: {}
      has-attachments: {}
      in: {}
      include-spam-trash: {}
      label: {}
      labels-ids: {}
      max-results:
        simple: "2"
      page-token: {}
      query: {}
      subject: {}
      to: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 920,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "17":
    id: "17"
    taskid: 05499427-9dea-4513-8c1b-8037da2f1bd1
    type: regular
    task:
      id: 05499427-9dea-4513-8c1b-8037da2f1bd1
      version: -1
      name: Get Thread
      script: '|||gmail-get-thread'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "29"
    scriptarguments:
      format: {}
      thread-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: admin@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ThreadId
          - operator: uniq
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 920,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "18":
    id: "18"
    taskid: 622e0d48-4aec-4eae-8b3c-1319950d4cef
    type: regular
    task:
      id: 622e0d48-4aec-4eae-8b3c-1319950d4cef
      version: -1
      name: Search in mailbox
      script: '|||gmail-search'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "19"
    scriptarguments:
      after: {}
      before: {}
      fields: {}
      filename: {}
      from: {}
      has-attachments: {}
      in:
        simple: INBOX
      include-spam-trash: {}
      labels-ids: {}
      max-results:
        simple: "1"
      page-token: {}
      query: {}
      subject: {}
      to: {}
      user-id:
        simple: shai@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "19":
    id: "19"
    taskid: b2477d31-a969-4a3c-8283-20881503a72b
    type: regular
    task:
      id: b2477d31-a969-4a3c-8283-20881503a72b
      version: -1
      name: Move mail to other folder
      script: '|||gmail-move-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "20"
    scriptarguments:
      add-labels:
        simple: CATEGORY_SOCIAL
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: shai@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      remove-labels:
        simple: INBOX
      user-id:
        simple: shai@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "20":
    id: "20"
    taskid: 790984ce-13c7-4026-85fe-8f5abeefe2aa
    type: regular
    task:
      id: 790984ce-13c7-4026-85fe-8f5abeefe2aa
      version: -1
      name: Move back to inbox
      script: '|||gmail-move-mail'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "29"
    scriptarguments:
      add-labels:
        simple: INBOX
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Mailbox
                iscontext: true
              right:
                value:
                  simple: shai@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      remove-labels:
        simple: CATEGORY_SOCIAL
      user-id:
        simple: shai@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1350,
          "y": 2265
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "21":
    id: "21"
    taskid: 32a080d5-f5d1-458f-813b-b5515211fecf
    type: regular
    task:
      id: 32a080d5-f5d1-458f-813b-b5515211fecf
      version: -1
      name: block the admin
      script: '|||gmail-add-delete-filter'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "23"
    scriptarguments:
      email-address:
        complex:
          root: Account
          filters:
          - - operator: startWith
              left:
                value:
                  simple: Account.Email.Address
                iscontext: true
              right:
                value:
                  simple: JohnS
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: Email
          - operator: getField
            args:
              field:
                value:
                  simple: Address
      user-id:
        simple: me
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 1040
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "22":
    id: "22"
    taskid: 54205f4e-fb61-413f-851a-77b17cbe0f4d
    type: title
    task:
      id: 54205f4e-fb61-413f-851a-77b17cbe0f4d
      version: -1
      name: Check all mailboxes
      type: title
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "16"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1340,
          "y": 1755
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "23":
    id: "23"
    taskid: f7c001d1-03af-47b0-8e22-a4731d42b16d
    type: regular
    task:
      id: f7c001d1-03af-47b0-8e22-a4731d42b16d
      version: -1
      name: Remove the block
      script: '|||gmail-remove-filter'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "6"
    scriptarguments:
      filter_ids:
        complex:
          root: GmailFilter
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: GmailFilter.Mailbox
                iscontext: true
              right:
                value:
                  simple: admin@demistodev.com
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      mailbox:
        complex:
          root: Gmail
          accessor: Filter.Mailbox
      user-id:
        simple: me
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1565,
          "y": 1215
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "25":
    id: "25"
    taskid: 0f23e869-47b8-40d4-808e-2ee55f52555a
    type: regular
    task:
      id: 0f23e869-47b8-40d4-808e-2ee55f52555a
      version: -1
      name: List mailbox filters
      script: '|||gmail-list-filters'
      type: regular
      iscommand: true
      brand: ""
    nexttasks:
      '#none#':
      - "27"
    scriptarguments:
      address: {}
      limit:
        simple: "5"
      user-id:
        simple: test@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 1740
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "26":
    id: "26"
    taskid: b2ee7195-a8c8-4fee-8f25-d6e023ebb515
    type: regular
    task:
      id: b2ee7195-a8c8-4fee-8f25-d6e023ebb515
      version: -1
      name: Delete filters from context
      description: Delete field from context
      scriptName: DeleteContext
      type: regular
      iscommand: false
      brand: ""
    nexttasks:
      '#none#':
      - "25"
    scriptarguments:
      all: {}
      index: {}
      key:
        simple: GmailFilter
      keysToKeep: {}
      subplaybook: {}
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 1565
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "27":
    id: "27"
    taskid: 247bd9f1-33e3-4303-801d-373d7fc709e8
    type: condition
    task:
      id: 247bd9f1-33e3-4303-801d-373d7fc709e8
      version: -1
      name: Verify Filters
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      '#default#':
      - "28"
      "yes":
      - "29"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isExists
          left:
            value:
              simple: GmailFilter
            iscontext: true
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 1915
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "28":
    id: "28"
    taskid: ffc3e010-f61a-4f99-8ebb-9a1627869f4b
    type: regular
    task:
      id: ffc3e010-f61a-4f99-8ebb-9a1627869f4b
      version: -1
      name: Print Error
      description: Prints an error entry with a given message
      scriptName: PrintErrorEntry
      type: regular
      iscommand: false
      brand: ""
    scriptarguments:
      message:
        simple: No filters were found in test@demistodev.com mailbox
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 1780,
          "y": 2090
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "29":
    id: "29"
    taskid: e280fa29-be4c-4230-89d1-70d6d5a032d1
    type: title
    task:
      id: e280fa29-be4c-4230-89d1-70d6d5a032d1
      version: -1
      name: Done
      type: title
      iscommand: false
      brand: ""
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 5330
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "30":
    id: "30"
    taskid: 13cb9a11-07ef-4d87-8665-2268c4a6f4d5
    type: regular
    task:
      id: 13cb9a11-07ef-4d87-8665-2268c4a6f4d5
      version: -1
      name: gmail-create-user
      description: Creates a user.
      script: Gmail|||gmail-create-user
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "31"
    scriptarguments:
      email:
        simple: re_test@demistodev.com
      family-name:
        simple: Second
      first-name:
        simple: First
      password:
        simple: 1q2w3e4r
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 2410
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "31":
    id: "31"
    taskid: a396f48a-0460-4438-8f91-d7f99a718f40
    type: regular
    task:
      id: a396f48a-0460-4438-8f91-d7f99a718f40
      version: -1
      name: gmail-hide-user-in-directory
      description: Hide a user in the Global Directory
      script: Gmail|||gmail-hide-user-in-directory
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "32"
    scriptarguments:
      user-id:
        simple: re_test@demistodev.com
      visible-globally:
        simple: "False"
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 2580
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "32":
    id: "32"
    taskid: 4e7942e8-2aba-4eff-8cb3-95fc71879ad1
    type: condition
    task:
      id: 4e7942e8-2aba-4eff-8cb3-95fc71879ad1
      version: -1
      name: Verify User creation and visbility
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "33"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Account.Email.Address
            iscontext: true
          right:
            value:
              simple: re_test@demistodev.com
      - - operator: isEqualString
          left:
            value:
              simple: Account.VisibleInDirectory
            iscontext: true
          right:
            value:
              simple: "false"
    view: |-
      {
        "position": {
          "x": 840,
          "y": 2760
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "33":
    id: "33"
    taskid: 47c611c0-339f-4ce6-82bd-a88faf8313ed
    type: regular
    task:
      id: 47c611c0-339f-4ce6-82bd-a88faf8313ed
      version: -1
      name: gmail-delete-user
      description: Delete a User
      script: Gmail|||gmail-delete-user
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "34"
    scriptarguments:
      user-id:
        simple: re_test@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 2940
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "34":
    id: "34"
    taskid: 923e120a-93e7-48c6-85d4-7acb56263af9
    type: regular
    task:
      id: 923e120a-93e7-48c6-85d4-7acb56263af9
      version: -1
      name: gmail-get-autoreply
      description: Get the auto-reply message set for the user-account
      script: Gmail|||gmail-get-autoreply
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "35"
    scriptarguments:
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 3120
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "35":
    id: "35"
    taskid: aac39550-c2ee-481a-8e40-6fd6503604c3
    type: regular
    task:
      id: aac39550-c2ee-481a-8e40-6fd6503604c3
      version: -1
      name: gmail-set-autoreply
      description: Set auto-reply for the user
      script: Gmail|||gmail-set-autoreply
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "36"
    scriptarguments:
      enableAutoReply:
        simple: "true"
      responseBodyPlainText:
        simple: test
      responseSubject:
        simple: newMessgae
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 3300
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "36":
    id: "36"
    taskid: d5b10c4c-50bf-43a4-8f98-2f67d0448240
    type: regular
    task:
      id: d5b10c4c-50bf-43a4-8f98-2f67d0448240
      version: -1
      name: gmail-get-autoreply
      description: Get the auto-reply message set for the user-account
      script: Gmail|||gmail-get-autoreply
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "37"
    scriptarguments:
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 3480
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "37":
    id: "37"
    taskid: c85f43d7-d607-40ec-8cd2-ecafb3df9402
    type: condition
    task:
      id: c85f43d7-d607-40ec-8cd2-ecafb3df9402
      version: -1
      name: Verify Autoreply
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "38"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Autoreply.EnableAutoReply
            iscontext: true
          right:
            value:
              simple: "true"
      - - operator: isEqualString
          left:
            value:
              simple: Autoreply.ResponseBody
            iscontext: true
          right:
            value:
              simple: test
      - - operator: isEqualString
          left:
            value:
              simple: Autoreply.ResponseSubject
            iscontext: true
          right:
            value:
              simple: newMessgae
    view: |-
      {
        "position": {
          "x": 840,
          "y": 3660
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "38":
    id: "38"
    taskid: 491c9b66-a153-43ad-8552-ae47350a9e2e
    type: regular
    task:
      id: 491c9b66-a153-43ad-8552-ae47350a9e2e
      version: -1
      name: gmail-set-autoreply - reset to original autoreply
      description: Set auto-reply for the user
      script: Gmail|||gmail-set-autoreply
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "39"
    scriptarguments:
      enableAutoReply:
        simple: ${Autoreply.EnableAutoReply}
      responseBodyPlainText:
        simple: ${Autoreply.ResponseBody}
      responseSubject:
        simple: ${Autoreply.ResponseSubject}
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 3840
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "39":
    id: "39"
    taskid: aa76db49-7c6d-4ecc-8880-d63cb1b18d9b
    type: regular
    task:
      id: aa76db49-7c6d-4ecc-8880-d63cb1b18d9b
      version: -1
      name: gmail-send-mail
      description: Send mail using gmail
      script: Gmail|||gmail-send-mail
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "40"
    scriptarguments:
      body:
        simple: '"Demisto Mail Sender"'
      emailfrom:
        simple: me
      emailto:
        simple: admin@demistodev.com
      entryid: {}
      subject:
        simple: AdminMail
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 4020
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "40":
    id: "40"
    taskid: 164738dd-6545-44b1-875d-ad99931dbee3
    type: regular
    task:
      id: 164738dd-6545-44b1-875d-ad99931dbee3
      version: -1
      name: gmail-get-mail
      description: Gets the specified message.
      script: Gmail|||gmail-get-mail
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "41"
    scriptarguments:
      format: {}
      message-id:
        simple: ${SentMail.MessageId}
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 4200
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "41":
    id: "41"
    taskid: bb397159-5b04-4cb4-8177-8415184a1f72
    type: condition
    task:
      id: bb397159-5b04-4cb4-8177-8415184a1f72
      version: -1
      name: Verify sent mail
      type: condition
      iscommand: false
      brand: ""
    nexttasks:
      "yes":
      - "45"
    separatecontext: false
    conditions:
    - label: "yes"
      condition:
      - - operator: isEqualString
          left:
            value:
              simple: Gmail.To
            iscontext: true
          right:
            value:
              simple: admin@demistodev.com
      - - operator: isEqualString
          left:
            value:
              simple: Gmail.From
            iscontext: true
          right:
            value:
              simple: admin@demistodev.com
      - - operator: isEqualString
          left:
            value:
              simple: Gmail.ID
            iscontext: true
          right:
            value:
              simple: SentMail.MessageId
            iscontext: true
    view: |-
      {
        "position": {
          "x": 840,
          "y": 4380
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "42":
    id: "42"
    taskid: 03b0c573-872a-4e15-8b23-efcce4e37e55
    type: regular
    task:
      id: 03b0c573-872a-4e15-8b23-efcce4e37e55
      version: -1
      name: gmail-delegate-user-mailbox
      script: Gmail|||gmail-delegate-user-mailbox
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "43"
    scriptarguments:
      delegateEmail:
        simple: test@demistodev.com
      delegateToken:
        simple: "True"
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 4730
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "43":
    id: "43"
    taskid: cd284af4-01fc-4923-8b17-dfb6b8af59af
    type: regular
    task:
      id: cd284af4-01fc-4923-8b17-dfb6b8af59af
      version: -1
      name: gmail-delegate-user-mailbox
      script: Gmail|||gmail-delegate-user-mailbox
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "29"
    scriptarguments:
      delegateEmail:
        simple: test@demistodev.com
      delegateToken:
        simple: "False"
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 4950
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
  "45":
    id: "45"
    taskid: 065cc6bd-689a-4f2d-8aea-a1c6bd506a7b
    type: regular
    task:
      id: 065cc6bd-689a-4f2d-8aea-a1c6bd506a7b
      version: -1
      name: gmail-delete-mail
      description: Delete a mail in the user's mailbox.
      script: Gmail|||gmail-delete-mail
      type: regular
      iscommand: true
      brand: Gmail
    nexttasks:
      '#none#':
      - "42"
    scriptarguments:
      message-id:
        complex:
          root: Gmail
          filters:
          - - operator: isEqualString
              left:
                value:
                  simple: Gmail.Subject
                iscontext: true
              right:
                value:
                  simple: AdminMail
          transformers:
          - operator: getField
            args:
              field:
                value:
                  simple: ID
      permanent: {}
      user-id:
        simple: admin@demistodev.com
    separatecontext: false
    view: |-
      {
        "position": {
          "x": 840,
          "y": 4550
        }
      }
    note: false
    timertriggers: []
    ignoreworker: false
view: |-
  {
    "linkLabelsPosition": {},
    "paper": {
      "dimensions": {
        "height": 5345,
        "width": 2110,
        "x": 50,
        "y": 50
      }
    }
  }
inputs: []
outputs: []
